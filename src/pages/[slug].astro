---
import MainLayout from "../layouts/MainLayout.astro";
import { serviceDetails } from "../data/serviceDetails";
import Carousel from "../components/Carousel.astro";
import FAQ from "../components/FAQ.astro";
import ServicesGrid from "../components/ServicesGrid.astro";
import CTA from "../components/CTA.astro";
import ContactForm from "../components/ContactForm.astro";

const { slug } = Astro.params;

const service = serviceDetails[slug as keyof typeof serviceDetails];

if (!service) {
  // Redirect to 404 if service doesn't exist
  return Astro.redirect("/404");
}

export async function getStaticPaths() {
  return Object.keys(serviceDetails).map((key) => ({ params: { slug: key } }));
}
---

<MainLayout
  title={service.title}
  metaTitle={service.title}
  metaDescription={service.metaDescription}
>
  <div class="bg-blue-50">
    <div
      class="relative isolate overflow-hidden bg-gradient-to-b from-blue-100/20 pt-14"
    >
      <div
        class="absolute inset-y-0 right-1/2 -z-10 -mr-96 w-[200%] origin-top-right skew-x-[-30deg] bg-white shadow-xl shadow-indigo-600/10 ring-1 ring-blue-50 sm:-mr-80 lg:-mr-96"
        aria-hidden="true"
      >
      </div>
      <div class="mx-auto max-w-7xl px-6 py-32 sm:py-40 lg:px-8">
        <div
          class="mx-auto max-w-2xl lg:mx-0 lg:grid lg:max-w-none lg:grid-cols-2 lg:gap-x-16 lg:gap-y-8 xl:grid-cols-1 xl:grid-rows-1 xl:gap-x-8"
        >
          <h1
            class="max-w-2xl text-balance text-5xl font-semibold tracking-tight text-blue-900 sm:text-7xl lg:col-span-2 xl:col-auto"
          >
            {service.MainTitle}
          </h1>
          <div class="mt-6 max-w-xl lg:mt-0 xl:col-end-1 xl:row-start-1">
            <p
              class="text-pretty text-lg font-medium text-gray-500 sm:text-xl/8"
            >
              {service.firstDescription}
            </p>
            <div class="mt-10 flex items-center gap-x-6">
              <a
                href="tel:4505420991"
                class="max-[440px]:w-full rounded-md transition ease-in-out delay-100 bg-blue-500 px-6 py-2 text-lg font-semibold text-white shadow-sm hover:bg-blue-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-400"
                >450-542-0991</a
              >
              <a
                href="/contactPage"
                class="max-[440px]:w-full rounded-md transition ease-in-out delay-100 border border-blue-500 px-6 py-2.5 text-lg font-semibold leading-6 text-blue-950 index-z hover:bg-blue-500 hover:text-white"
                >Soumission Gratuite <span aria-hidden="true">→</span></a
              >
            </div>
          </div>
          <img
            src={service.imgUrl1}
            alt=""
            class="mt-10 aspect-[6/5] w-full max-w-lg rounded-2xl object-cover sm:mt-16 lg:mt-0 lg:max-w-none xl:row-span-2 xl:row-end-2 xl:mt-36"
          />
        </div>
      </div>
      <div
        class="absolute inset-x-0 bottom-0 -z-10 h-24 bg-gradient-to-t from-white sm:h-32"
      >
      </div>
    </div>
  </div>

  <!-- second content section -->
  <div class="overflow-hidden bg-white py-24 sm:py-32">
    <div class="mx-auto max-w-7xl px-6 lg:px-8">
      <div
        class="mx-auto grid max-w-2xl grid-cols-1 gap-x-8 gap-y-16 sm:gap-y-20 lg:mx-0 lg:max-w-none lg:grid-cols-2"
      >
        <div class="lg:pr-8 lg:pt-4">
          <div class="lg:max-w-lg">
            <span class="text-base/7 font-semibold text-blue-500">
              {service.secondSubTitle}
            </span>
            <h2
              class="mt-2 text-pretty text-4xl font-semibold tracking-tight text-blue-900 sm:text-5xl"
            >
              {service.secondTitle}
            </h2>
            <p class="mt-6 text-lg/8 text-gray-600">
              {service.secondDescription}
            </p>
            <dl
              class="mt-10 max-w-xl space-y-8 text-base/7 text-gray-600 lg:max-w-none"
            >
              {
                service.details.map((detail) => (
                  <div class="relative pl-9">
                    <dt class="inline font-semibold text-blue-950">
                      <svg
                        class="absolute left-1 top-1 h-5 w-5 text-blue-600"
                        version="1.1"
                        viewBox="0 0 1200 1200"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="m600 1125c-289.5 0-525-235.5-525-525s235.5-525 525-525 525 235.5 525 525-235.5 525-525 525zm0-975c-248.26 0-450 201.74-450 450s201.74 450 450 450 450-201.74 450-450-201.74-450-450-450zm-32.25 674.63c10.125-1.5 19.5-7.125 25.5-15.75l262.5-375c12-16.875 7.875-40.5-9.375-52.125-16.875-12-40.5-7.875-52.125 9.375l-239.63 342.37-156.37-124.87c-16.125-13.125-39.75-10.125-52.875 6-12.75 16.125-10.125 39.75 6 52.875l187.5 150c6.75 5.25 15 8.25 23.25 8.25 1.875 0 3.375 0 5.25-0.375z"
                          fill="#0092d5"
                        />
                      </svg>
                      {detail.title}
                    </dt>
                    <dd class="inline">{detail.description}</dd>
                  </div>
                ))
              }
            </dl>
          </div>
        </div>
        <img
          src={service.imgUrl2}
          alt="Product screenshot"
          class="w-[48rem] lg:max-w-none rounded-xl shadow-xl ring-1 ring-gray-400/10 sm:w-[57rem] md:-ml-4 lg:-ml-0"
          width="2432"
          height="1442"
        />
      </div>
    </div>
  </div>
  <!-- Third Section -->
  <div class="bg-white py-24 sm:py-32">
    <div class="mx-auto max-w-7xl px-6 lg:px-8">
      <div
        class="mx-auto grid max-w-2xl grid-cols-1 items-start gap-x-8 gap-y-16 sm:gap-y-24 lg:mx-0 lg:max-w-none lg:grid-cols-2"
      >
        <div class="lg:pr-4 order-2 lg:order-1">
          <!-- <div
            class="relative overflow-hidden rounded-3xl px-6 pb-9 pt-64 shadow-2xl sm:px-12 lg:max-w-lg lg:px-8 lg:pb-8 xl:px-10 xl:pb-10"
          >
            <img
              class="absolute inset-0 size-full object-cover brightness-125 saturate-0"
              src={service.imgUrl3}
              alt=""
            />
            <div class="absolute inset-0 bg-gray-400 mix-blend-multiply"></div>
          </div> -->
          <img
            src={service.imgUrl3}
            alt="Product screenshot"
            class="w-[48rem] rounded-xl shadow-xl ring-1 ring-gray-400/10 sm:w-[57rem]"
            width="2432"
            height="1442"
          />
        </div>
        <div class="order-1 lg:order-2">
          <div class="text-base/7 text-gray-700 lg:max-w-lg">
            <p class="text-base/7 font-semibold text-blue-600">
              {service.thirdSubTitle}
            </p>
            <h2
              class="mt-2 text-pretty text-4xl font-semibold tracking-tight text-blue-900 sm:text-5xl"
            >
              {service.thirdTitle}
            </h2>
            <div class="max-w-xl">
              <p class="mt-6">
                {service.thirdDescription}
              </p>
            </div>
          </div>

          <div class="mt-10 flex items-center gap-x-6">
            <a
              href="tel:4505420991"
              class="max-[440px]:w-full rounded-md transition ease-in-out delay-100 bg-blue-500 px-6 py-2 text-lg font-semibold text-white shadow-sm hover:bg-blue-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-400"
              >450-542-0991</a
            >
            <a
              href="/contactPage"
              class="max-[440px]:w-full rounded-md transition ease-in-out delay-100 border border-blue-500 px-6 py-2.5 text-lg font-semibold leading-6 text-blue-950 index-z hover:bg-blue-500 hover:text-white"
              >Soumission Gratuite <span aria-hidden="true">→</span></a
            >
          </div>
        </div>
      </div>
    </div>
  </div>

  <FAQ />
  <ServicesGrid />
  <CTA />
  <Carousel />
  <ContactForm />
</MainLayout>
